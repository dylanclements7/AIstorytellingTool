{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 5 - Scenes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{% static 'main/css/style.css' %}">
</head>
<body class="bg-light">

    <!-- Navbar - Steps 1–3 completed, Step 4 active -->
    <nav class="d-flex justify-content-center py-4 bg-white">
        <div class="step disabled">
            <div>1</div>
            <small>Idea</small>
        </div>
        <div class="step disabled">
            <div>2</div>
            <small>Draft</small>
        </div>
        <a href="{% url 'personas' %}" class="step completed">
            <div>3</div>
            <small>Personas</small>
        </a>
        <a href="{% url 'locations' %}" class="step completed">
            <div>4</div>
            <small>Locations</small>
        </a>
        <div class="step active">
            <div>5</div>
            <small>Scene</small>
        </div>
    </nav>

    <div class="container mt-5">
        <h4 class="mb-2 text-center">Scenes</h4>
        <p class="text-muted text-center mb-4">
            Here you can edit what each scene looks like for the story.
        </p>

        <div class="card shadow-sm mx-auto p-4" style="max-width: 900px;">

            <!-- Carousel -->
            <div id="scenesCarousel" class="carousel slide mb-4" data-bs-ride="false">
              <div class="carousel-inner">

                <!-- Scene 1 -->
                <div class="carousel-item active" data-location="1">
                  <h2 class="text-center mb-4">Scene 1</h2>
                  
                  <!-- Image and Image Prompt Side by Side -->
                  <div class="row g-4 mb-4">
                    <div class="col-md-6">
                      <img src="{% static 'main/images/exampleImage.png' %}" alt="Scene illustration" class="scene-image">
                    </div>
                    <div class="col-md-6">
                      <label class="form-label fw-bold text-secondary">Image Prompt</label>
                      <p><a href="{% url 'personas' %}">Bob</a> waits on the rainy city street, his wheelchair positioned near the curb under a flickering lamppost. Water pools around the wheels, catching reflections of neon lights and passing cars. He checks his phone, watching the Uber timer count down. The air smells of wet asphalt and distant exhaust, wrapping the moment in damp stillness and faint hope.</p>
                      
                      <!-- Image Prompt Form -->
                      <form method="post" action="{% url 'scene' %}">
                          {% csrf_token %}
                          <input type="hidden" name="scene_id" value="1">
                          
                          <div class="position-relative">
                              <textarea 
                                  class="form-control" 
                                  name="image_Prompt_feedback" 
                                  rows="3" 
                                  placeholder="Edit Image Prompt..."
                              ></textarea>
                              <button 
                                  type="submit" 
                                  name="action" 
                                  value="regenerate_image" 
                                  class="btn btn-link position-absolute top-0 end-0 mt-2 me-2"
                                  style="font-size: 1.5rem; color: #6c757d;"
                              >
                                  <i class="bi bi-send"></i>
                              </button>
                          </div>
                      </form>
                    </div>
                  </div>

                  <!-- Narration Centered Below -->
                  <div class="mb-4">
                    <label class="form-label fw-bold text-secondary">Narration</label>
                    <p>The rain had already been falling for an hour, steady and unbothered. Bob (muttering): "Come on, five minutes... let's hope this one's on time." He adjusts his jacket collar and tucks his phone into his lap. The app glows faintly: Driver arriving in 3 minutes.</p>
                    
                    <!-- Narration Form -->
                    <form method="post" action="{% url 'scene' %}">
                        {% csrf_token %}
                        <input type="hidden" name="scene_id" value="1">
                        
                        <div class="position-relative">
                            <textarea 
                                class="form-control" 
                                name="narration_feedback" 
                                rows="3" 
                                placeholder="Edit Narration..."
                            ></textarea>
                            <button 
                                type="submit" 
                                name="action" 
                                value="regenerate_narration" 
                                class="btn btn-link position-absolute top-0 end-0 mt-2 me-2"
                                style="font-size: 1.5rem; color: #6c757d;"
                            >
                                <i class="bi bi-send"></i>
                            </button>
                        </div>
                    </form>
                  </div>
                </div>

                <!-- Scene 2 -->
                <div class="carousel-item" data-location="2">
                  <h2 class="text-center mb-4">Scene 2</h2>
                  
                  <div class="row g-4 mb-4">
                    <div class="col-md-6">
                      <img src="{% static 'main/images/exampleImage.png' %}" alt="Scene illustration" class="scene-image">
                    </div>
                    <div class="col-md-6">
                      <label class="form-label fw-bold text-secondary">Image Prompt</label>
                      <p><a href="{% url 'personas' %}">Claire</a> waits by the <a href="{% url 'locations' %}">City Street</a></p>
                      
                      <form method="post" action="{% url 'scene' %}">
                          {% csrf_token %}
                          <input type="hidden" name="scene_id" value="2">
                          
                          <div class="position-relative">
                              <textarea 
                                  class="form-control" 
                                  name="image_Prompt_feedback" 
                                  rows="3" 
                                  placeholder="Edit Image Prompt..."
                              ></textarea>
                              <button 
                                  type="submit" 
                                  name="action" 
                                  value="regenerate_image" 
                                  class="btn btn-link position-absolute top-0 end-0 mt-2 me-2"
                                  style="font-size: 1.5rem; color: #6c757d;"
                              >
                                  <i class="bi bi-send"></i>
                              </button>
                          </div>
                      </form>
                    </div>
                  </div>

                  <div class="mb-4">
                    <label class="form-label fw-bold text-secondary">Narration</label>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                    
                    <form method="post" action="{% url 'scene' %}">
                        {% csrf_token %}
                        <input type="hidden" name="scene_id" value="2">
                        
                        <div class="position-relative">
                            <textarea 
                                class="form-control" 
                                name="narration_feedback" 
                                rows="3" 
                                placeholder="Edit Narration..."
                            ></textarea>
                            <button 
                                type="submit" 
                                name="action" 
                                value="regenerate_narration" 
                                class="btn btn-link position-absolute top-0 end-0 mt-2 me-2"
                                style="font-size: 1.5rem; color: #6c757d;"
                            >
                                <i class="bi bi-send"></i>
                            </button>
                        </div>
                    </form>
                  </div>
                </div>

                <!-- Scene 3 -->
                <div class="carousel-item" data-location="3">
                  <h2 class="text-center mb-4">Scene 3</h2>
                  
                  <div class="row g-4 mb-4">
                    <div class="col-md-6">
                      <img src="{% static 'main/images/exampleImage.png' %}" alt="Scene illustration" class="scene-image">
                    </div>
                    <div class="col-md-6">
                      <label class="form-label fw-bold text-secondary">Image Prompt</label>
                      <p><a href="{% url 'personas' %}">Billy</a> Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                      
                      <form method="post" action="{% url 'scene' %}">
                          {% csrf_token %}
                          <input type="hidden" name="scene_id" value="3">
                          
                          <div class="position-relative">
                              <textarea 
                                  class="form-control" 
                                  name="image_Prompt_feedback" 
                                  rows="3" 
                                  placeholder="Edit Image Prompt..."
                              ></textarea>
                              <button 
                                  type="submit" 
                                  name="action" 
                                  value="regenerate_image" 
                                  class="btn btn-link position-absolute top-0 end-0 mt-2 me-2"
                                  style="font-size: 1.5rem; color: #6c757d;"
                              >
                                  <i class="bi bi-send"></i>
                              </button>
                          </div>
                      </form>
                    </div>
                  </div>

                  <div class="mb-4">
                    <label class="form-label fw-bold text-secondary">Narration</label>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                    
                    <form method="post" action="{% url 'scene' %}">
                        {% csrf_token %}
                        <input type="hidden" name="scene_id" value="3">
                        
                        <div class="position-relative">
                            <textarea 
                                class="form-control" 
                                name="narration_feedback" 
                                rows="3" 
                                placeholder="Edit Narration..."
                            ></textarea>
                            <button 
                                type="submit" 
                                name="action" 
                                value="regenerate_narration" 
                                class="btn btn-link position-absolute top-0 end-0 mt-2 me-2"
                                style="font-size: 1.5rem; color: #6c757d;"
                            >
                                <i class="bi bi-send"></i>
                            </button>
                        </div>
                    </form>
                  </div>
                </div>

                <!-- Scene 4 -->
                <div class="carousel-item" data-location="4">
                  <h2 class="text-center mb-4">Scene 4</h2>
                  
                  <div class="row g-4 mb-4">
                    <div class="col-md-6">
                      <img src="{% static 'main/images/exampleImage.png' %}" alt="Scene illustration" class="scene-image">
                    </div>
                    <div class="col-md-6">
                      <label class="form-label fw-bold text-secondary">Image Prompt</label>
                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                      
                      <form method="post" action="{% url 'scene' %}">
                          {% csrf_token %}
                          <input type="hidden" name="scene_id" value="4">
                          
                          <div class="position-relative">
                              <textarea 
                                  class="form-control" 
                                  name="image_Prompt_feedback" 
                                  rows="3" 
                                  placeholder="Edit Image Prompt..."
                              ></textarea>
                              <button 
                                  type="submit" 
                                  name="action" 
                                  value="regenerate_image" 
                                  class="btn btn-link position-absolute top-0 end-0 mt-2 me-2"
                                  style="font-size: 1.5rem; color: #6c757d;"
                              >
                                  <i class="bi bi-send"></i>
                              </button>
                          </div>
                      </form>
                    </div>
                  </div>

                  <div class="mb-4">
                    <label class="form-label fw-bold text-secondary">Narration</label>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                    
                    <form method="post" action="{% url 'scene' %}">
                        {% csrf_token %}
                        <input type="hidden" name="scene_id" value="4">
                        
                        <div class="position-relative">
                            <textarea 
                                class="form-control" 
                                name="narration_feedback" 
                                rows="3" 
                                placeholder="Edit Narration..."
                            ></textarea>
                            <button 
                                type="submit" 
                                name="action" 
                                value="regenerate_narration" 
                                class="btn btn-link position-absolute top-0 end-0 mt-2 me-2"
                                style="font-size: 1.5rem; color: #6c757d;"
                            >
                                <i class="bi bi-send"></i>
                            </button>
                        </div>
                    </form>
                  </div>
                </div>

                <!-- Scene 5 -->
                <div class="carousel-item" data-location="5">
                  <h2 class="text-center mb-4">Scene 5</h2>
                  
                  <div class="row g-4 mb-4">
                    <div class="col-md-6">
                      <img src="{% static 'main/images/exampleImage.png' %}" alt="Scene illustration" class="scene-image">
                    </div>
                    <div class="col-md-6">
                      <label class="form-label fw-bold text-secondary">Image Prompt</label>
                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                      
                      <form method="post" action="{% url 'scene' %}">
                          {% csrf_token %}
                          <input type="hidden" name="scene_id" value="5">
                          
                          <div class="position-relative">
                              <textarea 
                                  class="form-control" 
                                  name="image_Prompt_feedback" 
                                  rows="3" 
                                  placeholder="Edit Image Prompt..."
                              ></textarea>
                              <button 
                                  type="submit" 
                                  name="action" 
                                  value="regenerate_image" 
                                  class="btn btn-link position-absolute top-0 end-0 mt-2 me-2"
                                  style="font-size: 1.5rem; color: #6c757d;"
                              >
                                  <i class="bi bi-send"></i>
                              </button>
                          </div>
                      </form>
                    </div>
                  </div>

                  <div class="mb-4">
                    <label class="form-label fw-bold text-secondary">Narration</label>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                    
                    <form method="post" action="{% url 'scene' %}">
                        {% csrf_token %}
                        <input type="hidden" name="scene_id" value="5">
                        
                        <div class="position-relative">
                            <textarea 
                                class="form-control" 
                                name="narration_feedback" 
                                rows="3" 
                                placeholder="Edit Narration..."
                            ></textarea>
                            <button 
                                type="submit" 
                                name="action" 
                                value="regenerate_narration" 
                                class="btn btn-link position-absolute top-0 end-0 mt-2 me-2"
                                style="font-size: 1.5rem; color: #6c757d;"
                            >
                                <i class="bi bi-send"></i>
                            </button>
                        </div>
                    </form>
                  </div>
                </div>

                <!-- Scene 6 -->
                <div class="carousel-item" data-location="6">
                  <h2 class="text-center mb-4">Scene 6</h2>
                  
                  <div class="row g-4 mb-4">
                    <div class="col-md-6">
                      <img src="{% static 'main/images/exampleImage.png' %}" alt="Scene illustration" class="scene-image">
                    </div>
                    <div class="col-md-6">
                      <label class="form-label fw-bold text-secondary">Image Prompt</label>
                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                      
                      <form method="post" action="{% url 'scene' %}">
                          {% csrf_token %}
                          <input type="hidden" name="scene_id" value="6">
                          
                          <div class="position-relative">
                              <textarea 
                                  class="form-control" 
                                  name="image_Prompt_feedback" 
                                  rows="3" 
                                  placeholder="Edit Image Prompt..."
                              ></textarea>
                              <button 
                                  type="submit" 
                                  name="action" 
                                  value="regenerate_image" 
                                  class="btn btn-link position-absolute top-0 end-0 mt-2 me-2"
                                  style="font-size: 1.5rem; color: #6c757d;"
                              >
                                  <i class="bi bi-send"></i>
                              </button>
                          </div>
                      </form>
                    </div>
                  </div>

                  <div class="mb-4">
                    <label class="form-label fw-bold text-secondary">Narration</label>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                    
                    <form method="post" action="{% url 'scene' %}">
                        {% csrf_token %}
                        <input type="hidden" name="scene_id" value="6">
                        
                        <div class="position-relative">
                            <textarea 
                                class="form-control" 
                                name="narration_feedback" 
                                rows="3" 
                                placeholder="Edit Narration..."
                            ></textarea>
                            <button 
                                type="submit" 
                                name="action" 
                                value="regenerate_narration" 
                                class="btn btn-link position-absolute top-0 end-0 mt-2 me-2"
                                style="font-size: 1.5rem; color: #6c757d;"
                            >
                                <i class="bi bi-send"></i>
                            </button>
                        </div>
                    </form>
                  </div>
                </div>

              </div>

              <!-- Carousel indicators -->
              <button class="carousel-control-prev" type="button" data-bs-target="#scenesCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <div class="carousel-indicators position-relative mt-3">
                <button type="button" data-bs-target="#scenesCarousel" data-bs-slide-to="0" class="active" aria-current="true"></button>
                <button type="button" data-bs-target="#scenesCarousel" data-bs-slide-to="1"></button>
                <button type="button" data-bs-target="#scenesCarousel" data-bs-slide-to="2"></button>
                <button type="button" data-bs-target="#scenesCarousel" data-bs-slide-to="3"></button>
                <button type="button" data-bs-target="#scenesCarousel" data-bs-slide-to="4"></button>
                <button type="button" data-bs-target="#scenesCarousel" data-bs-slide-to="5"></button>
              </div>
              <button class="carousel-control-next" type="button" data-bs-target="#scenesCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
              </button>
            </div>

            <!-- Next Button -->
            <div class="d-flex justify-content-end">
                <form method="post" action="{% url 'video' %}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-primary">Next →</button>
                </form>
            </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>