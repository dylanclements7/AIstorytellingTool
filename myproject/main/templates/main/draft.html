{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 2 - Draft</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        .step {
            text-align: center;
            margin: 0 15px;
            color: #6c757d;
            text-decoration: none;
        }
        .step div {
            width: 50px;
            height: 50px;
            line-height: 50px;
            border-radius: 50%;
            border: 2px solid #6c757d;
            margin: 0 auto 5px;
            font-weight: bold;
        }
        .step.active div {
            background-color: #6c757d;
            color: white;
        }
        .step.completed div {
            background-color: #198754;
            border-color: #198754;
            color: white;
        }
        .step.disabled {
            pointer-events: none;
            opacity: 0.5;
        }
    </style>
</head>
<body class="bg-light">

    <!-- Navbar - Steps 1-2 highlighted, Step 2 active -->
    <nav class="d-flex justify-content-center py-4 bg-white">
        <a href="{% url 'idea' %}" class="step completed">
            <div>1</div>
            <small>Idea</small>
        </a>
        <div class="step active">
            <div>2</div>
            <small>Draft</small>
        </div>
        <div class="step disabled">
            <div>3</div>
            <small>Personas</small>
        </div>
        <div class="step disabled">
            <div>4</div>
            <small>Locations</small>
        </div>
        <div class="step disabled">
            <div>5</div>
            <small>Scene</small>
        </div>
    </nav>

    <div class="container mt-5">
        <h4 class="mb-2 text-center">Draft</h4>
        <p class="text-muted text-center mb-4">Here you can edit the draft of your story.</p>
        
        <div class="card shadow-sm mx-auto p-4" style="max-width: 700px;">
            <!-- Draft Display Box -->
            <div class="border rounded p-3 bg-white mb-4">
                <div class="d-flex align-items-center mb-3">
                    <h6 class="text-secondary mb-0 me-2">Tone:</h6>
                    <div class="d-flex flex-wrap gap-2">
                        <span class="badge bg-danger">Frustration</span>
                        <span class="badge bg-info text-dark">Hope</span>
                    </div>
                </div>
                
                <h5 class="fw-bold mb-3">The Ride That Never Came</h5>
                
                <div class="p-3 bg-light rounded">
                    <p class="mb-2">
                        Bob, a witty and resilient man who uses a wheelchair, orders an Uber on a rainy evening to make it to his friend’s birthday dinner across town. He double-checks the accessibility option on the app, ensuring the driver knows he’ll need a bit of help getting his chair into the trunk. The app says “Driver arriving in 3 minutes.”
                        When the car pulls up, the driver hesitates, rolls down the window, and—after a brief exchange—drives off, canceling the ride. Bob watches the taillights fade through the rain. What follows is not just frustration, but reflection: on dependence and independence, on dignity and empathy, and on the small, daily injustices that add up to exhaustion.
                        Bob calls support, tweets about the incident, and sits in silence as notifications pour in—some supportive, others cruelly dismissive. A neighbor passing by offers him a lift, and together they navigate the city streets, sharing stories that turn the night from bitter to bittersweet.
                        The story closes with Bob arriving late but welcomed warmly, laughter echoing as he wheels in—wet, tired, but triumphant. The moment is ordinary yet defiant: he got there anyway.
                    </p>
            </div>

            <!-- Feedback Form -->
            <form method="post" action="{% url 'draft' %}" id="locationForm">
                {% csrf_token %}
                <input type="hidden" name="location_id" id="locationId" value="1">
                
                <div class="position-relative mb-4">
                    <textarea 
                        class="form-control" 
                        name="feedback" 
                        id="feedbackText"
                        rows="4" 
                        placeholder="Do you want to make any changes?"
                    ></textarea>
                    <button 
                        type="submit" 
                        name="action" 
                        value="regenerate" 
                        class="btn btn-link position-absolute top-0 end-0 mt-2 me-2"
                        style="font-size: 1.5rem; color: #6c757d;"
                    >
                        <i class="bi bi-send"></i>
                    </button>
                </div>
                
                <div class="d-flex justify-content-end">
                    <button type="submit" name="action" value="next" formaction="{% url 'personas' %}" class="btn btn-primary">Next →</button>
                </div>
            </form>
        
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>