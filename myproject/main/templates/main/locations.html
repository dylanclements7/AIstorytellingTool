{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 4 - Locations</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .step {
            text-align: center;
            margin: 0 15px;
            color: #6c757d;
            text-decoration: none;
        }
        .step div {
            width: 50px;
            height: 50px;
            line-height: 50px;
            border-radius: 50%;
            border: 2px solid #6c757d;
            margin: 0 auto 5px;
            font-weight: bold;
        }
        .step.active div {
            background-color: #6c757d;
            color: white;
        }
        .step.completed div {
            background-color: #198754;
            border-color: #198754;
            color: white;
        }
        .step.disabled {
            pointer-events: none;
            opacity: 0.5;
        }
        .action-text {
            color: #6c757d;
            font-style: italic;
        }
    </style>
</head>
<body class="bg-light">

    <!-- Navbar - Steps 1â€“3 completed, Step 4 active -->
    <nav class="d-flex justify-content-center py-4 bg-white">
        <a href="{% url 'idea' %}" class="step completed">
            <div>1</div>
            <small>Idea</small>
        </a>
        <a href="{% url 'draft' %}" class="step completed">
            <div>2</div>
            <small>Draft</small>
        </a>
        <a href="{% url 'personas' %}" class="step completed">
            <div>3</div>
            <small>Personas</small>
        </a>
        <div class="step active">
            <div>4</div>
            <small>Locations</small>
        </div>
    </nav>

    <div class="container mt-5">
        <h4 class="mb-2 text-center">Locations</h4>
        <p class="text-muted text-center mb-4">
            Here you can edit what each location looks like for the story.
        </p>

        <div class="card shadow-sm mx-auto p-4" style="max-width: 700px;">

            <!-- Location 1 -->
            <div class="border rounded p-3 bg-white mb-4">
                <h6 class="mb-3">City Street</h6>
                <p class="mb-2"><strong>Description:</strong> A rainy urban street at night, illuminated by dim yellow streetlights and neon reflections in shallow puddles. Wet asphalt glistens under soft rainfall. A flickering lamppost stands near the curb beside a faded crosswalk. Blurred car headlights and taillights streak across the background. Realistic lighting, cinematic rain effect, detailed reflections, slightly moody atmosphere.</p>
                <p class="action-text mb-3"><strong>Action:</strong> Bob waits in the rain after ordering his Uber. When the driver arrives, they see his wheelchair, hesitate, and refuse the ride before driving off. This is the emotional center of the storyâ€”where Bobâ€™s quiet hope turns into disappointment and isolation.</p>

                <form method="post" action="{% url 'locations' %}">
                    {% csrf_token %}
                    <div class="mb-3">
                        <input type="text" class="form-control" name="feedback_location_1" placeholder="Edit or regenerate this location...">
                    </div>
                    <button type="submit" name="action" value="regenerate_1" class="btn btn-secondary btn-sm">ðŸ”„ Regenerate</button>
                </form>
            </div>

            <!-- Location 2 -->
            <div class="border rounded p-3 bg-white mb-4">
                <h6 class="mb-3">Location 2</h6>
                <p class="mb-2"><strong>Description:</strong> A narrow room lined with overflowing bookshelves, the air filled with the smell of paper and coffee.</p>
                <p class="action-text mb-3"><strong>Action:</strong> Marcus paces restlessly, searching through his notes as if the answer to everything lies in one misplaced page.</p>

                <form method="post" action="{% url 'locations' %}">
                    {% csrf_token %}
                    <div class="mb-3">
                        <input type="text" class="form-control" name="feedback_location_2" placeholder="Edit or regenerate this location...">
                    </div>
                    <button type="submit" name="action" value="regenerate_2" class="btn btn-secondary btn-sm">ðŸ”„ Regenerate</button>
                </form>
            </div>

            <!-- Location 3 -->
            <div class="border rounded p-3 bg-white mb-4">
                <h6 class="mb-3">Location 3</h6>
                <p class="mb-2"><strong>Description:</strong> A deserted avenue under flickering streetlights, rain-slicked and eerily quiet.</p>
                <p class="action-text mb-3"><strong>Action:</strong> Riley walks alone, their reflection rippling in every puddle as if haunted by the night itself.</p>

                <form method="post" action="{% url 'locations' %}">
                    {% csrf_token %}
                    <div class="mb-3">
                        <input type="text" class="form-control" name="feedback_location_3" placeholder="Edit or regenerate this location...">
                    </div>
                    <button type="submit" name="action" value="regenerate_3" class="btn btn-secondary btn-sm">ðŸ”„ Regenerate</button>
                </form>
            </div>

            <!-- Next Button -->
            <form method="post" action="{% url 'scene1' %}">
                {% csrf_token %}
                <div class="d-flex justify-content-end mt-3">
                    <button type="submit" name="action" value="next" class="btn btn-primary">Next â†’</button>
                </div>
            </form>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
